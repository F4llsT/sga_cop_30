{% load i18n %}

<section class="alert-section">
    <div class="mb-3">
        <h2>{% trans 'Avisos Importantes' %}</h2>
    </div>
    
    <div class="alert-cards-container">
        {% for aviso in avisos_ativos %}
        <div class="alert-card {% if aviso.nivel == 'info' %}blue-alert{% elif aviso.nivel == 'alerta' %}green-alert{% else %}red-alert{% endif %}" {% if aviso.data_expiracao %}data-expires-at="{{ aviso.data_expiracao|date:'c' }}"{% endif %}>
            <i class="fa-solid fa-{{ aviso.icone }}"></i>
            <div class="alert-content">
                <h4>{{ aviso.titulo }}</h4>
                <p>{{ aviso.mensagem }}</p>
            </div>
        </div>
        {% empty %}
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            {% trans 'Nenhum aviso no momento.' %}
        </div>
        {% endfor %}
    </div>
</section>

<style>
/* ===== CONFIGURAÇÕES GLOBAIS E VARIÁVEIS ===== */
:root {
    --primary-blue: #0A74DA;
    --dark-blue: #004A99;
    --light-blue-bg: #EAF6FF;
    --white-bg: #FFFFFF;
    --text-primary: #1c1c1c;
    --text-secondary: #65676b;
    --border-color: #e0e0e0;
    --notification-red: #e74c3c;
    
    --radius-md: 16px;
    --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    --shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.15);
    
    /* Estilos base para a página */
    font-family: 'Inter', sans-serif;
    background-color: #f4f6f9; /* Fundo cinza claro para destacar os cartões */
}
body { margin: 0; padding: 0; }
h2, h4 { color: var(--text-primary); }

/* Utility Classes (Simulando Bootstrap/Tailwind) */
.mb-3 { margin-bottom: 1rem; }
.me-2 { margin-right: 0.5rem; }

/* Estilo para a mensagem de Nenhum Aviso */
.alert.alert-info {
    padding: 1rem;
    background-color: var(--light-blue-bg);
    color: var(--dark-blue);
    border: 1px solid var(--primary-blue);
    border-radius: var(--radius-md);
    width: 100%;
    max-width: 600px; /* Limitar em desktop */
    margin: 0 auto;
    text-align: center;
}
.alert.alert-info i { color: var(--primary-blue); }


/* ===== SEÇÕES DE CONTEÚDO (Avisos) ===== */
.alert-section {
    padding: 2rem 1.5rem;
    width: 100%;
    margin: 0 auto;
    box-sizing: border-box;
}
.alert-cards-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0;
}
.alert-card {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    padding: 1.5rem 2rem;
    border-radius: var(--radius-md);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    cursor: pointer;
    text-align: left;
    width: 100%;
    box-sizing: border-box;
    margin: 0;
}
.alert-card:hover { 
    transform: translateY(-4px); /* Efeito de elevação sutil */
    box-shadow: var(--shadow-hover); 
}
.alert-card i { 
    font-size: 2rem; /* Ícones maiores */
    flex-shrink: 0; 
    margin-top: 0.1rem; /* Ajuste fino */
}
.alert-content {
    flex: 1;
    width: 100%;
}
.alert-content h4 { 
    font-size: 1.1rem;
    font-weight: 700; 
    margin: 0 0 0.5rem 0;
    line-height: 1.3;
}
.alert-content p { 
    font-size: 0.95rem; 
    line-height: 1.5; 
    margin: 0; 
    color: var(--text-primary);
}
.blue-alert i { 
    color: var(--primary-blue); 
}
.red-alert { 
    background-color: #fce7e7; 
    color: #c0392b; 
}
.red-alert i { 
    color: var(--notification-red); 
}
.green-alert { 
    background-color: #e8f9e8; 
    color: #27ae60; 
}
.green-alert i { 
    color: #2ecc71; 
}

/* ESTILO PARA AVISOS EXPIRADOS */
.alert-card.expired {
    opacity: 0.4;
    transform: none; /* Remove hover effect when expired */
    cursor: default;
    /* Linha cinza tracejada para indicar que está inativo */
    border: 2px dashed var(--border-color); 
}
.alert-card.expired:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Mantém sombra baixa */
}
.alert-card.expired .alert-content h4::after {
    content: " (EXPIRADO)";
    font-weight: 500;
    font-size: 0.8em;
    color: var(--text-secondary);
}


/* MEDIA QUERY - Aplica o layout de 3 colunas em desktop */
@media (min-width: 768px) {
    .alert-cards-container { 
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
        padding: 0;
        gap: 1.5rem;
    }
    .alert-card { 
        width: calc(50% - 0.75rem); /* Metade do container menos metade do gap */
        max-width: 100%;
        flex: 0 0 calc(50% - 0.75rem);
        box-sizing: border-box;
    }
}

/* Estilos Adicionais para Rodapé */
.main-footer {
    background-color: var(--dark-blue); 
    color: var(--light-blue-bg);
    padding: 3rem 1.5rem; 
    font-size: 0.9rem;
    margin-top: 2rem;
}
.footer-content-wrapper { 
    display: flex; 
    flex-direction: column; 
    gap: 2rem; 
    max-width: 1000px; 
    margin: 0 auto; 
}
.footer-logo { 
    display: flex; 
    align-items: center; 
    gap: 0.5rem; 
    color: var(--white-bg); 
}
.footer-logo i { font-size: 1.5rem; }
.footer-logo h3 { font-size: 1.5rem; margin: 0; }
.footer-links a { color: var(--light-blue-bg); opacity: 0.8; text-decoration: none; }
.footer-links a:hover { opacity: 1; text-decoration: underline; }
@media (min-width: 768px) {
    .footer-content-wrapper { flex-direction: row; justify-content: space-between; align-items: flex-start; }
}

/* NÍVEIS DE ALERTA */
.blue-alert { 
    background-color: var(--light-blue-bg); 
    color: var(--dark-blue); 
}
.blue-alert i { 
    color: var(--primary-blue); 
}
.red-alert { 
    background-color: #fce7e7; 
    color: #c0392b; 
}
.red-alert i { 
    color: var(--notification-red); 
}
.green-alert { 
    background-color: #e8f9e8; 
    color: #27ae60; 
}
.green-alert i { 
    color: #2ecc71; 
}

/* ESTILO PARA AVISOS EXPIRADOS */
.alert-card.expired {
    opacity: 0.4;
    transform: none; /* Remove hover effect when expired */
    cursor: default;
    /* Linha cinza tracejada para indicar que está inativo */
    border: 2px dashed var(--border-color); 
}
.alert-card.expired:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Mantém sombra baixa */
}
.alert-card.expired .alert-content h4::after {
    content: " (EXPIRADO)";
    font-weight: 500;
    font-size: 0.8em;
    color: var(--text-secondary);
}


/* MEDIA QUERY - Aplica o layout de 3 colunas em desktop */
@media (min-width: 768px) {
    .alert-cards-container { 
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
        padding: 0;
        gap: 1.5rem;
    }
    .alert-card { 
        width: calc(50% - 0.75rem); /* Metade do container menos metade do gap */
        max-width: 100%;
        flex: 0 0 calc(50% - 0.75rem);
        box-sizing: border-box;
    }
}

/* Estilos Adicionais para Rodapé */
.main-footer {
    background-color: var(--dark-blue); 
    color: var(--light-blue-bg);
    padding: 3rem 1.5rem; 
    font-size: 0.9rem;
    margin-top: 2rem;
}
.footer-content-wrapper { 
    display: flex; 
    flex-direction: column; 
    gap: 2rem; 
    max-width: 1000px; 
    margin: 0 auto; 
}
.footer-logo { 
    display: flex; 
    align-items: center; 
    gap: 0.5rem; 
    color: var(--white-bg); 
}
.footer-logo i { font-size: 1.5rem; }
.footer-logo h3 { font-size: 1.5rem; margin: 0; }
.footer-links a { color: var(--light-blue-bg); opacity: 0.8; text-decoration: none; }
.footer-links a:hover { opacity: 1; text-decoration: underline; }
@media (min-width: 768px) {
    .footer-content-wrapper { flex-direction: row; justify-content: space-between; align-items: flex-start; }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Verificar avisos expirados
    const alertCards = document.querySelectorAll('.alert-card[data-expires-at]');
    const now = new Date();
    
    alertCards.forEach(card => {
        const expiresAt = new Date(card.dataset.expiresAt);
        if (expiresAt < now) {
            card.classList.add('expired');
        }
    });
});
</script>
